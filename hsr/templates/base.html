<!DOCTYPE html>

<html lang="fr">

	<head>
		<title>{% block title %}Hearthstone Romandie{% endblock %}</title>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<link rel="stylesheet" type="text/css" href="/static/styles/style_1.css" />
		<link rel="stylesheet" type="text/css" href="/static/styles/forum_1.css" />
		<link rel="shortcut icon" href="/static/images/favicon/favicon_anim.gif" >
		<link rel="icon" href="/static/images/favicon/favicon_anim_f.gif" type="image/gif" >
		<link href='http://fonts.googleapis.com/css?family=Balthazar' rel='stylesheet' type='text/css'>
        <link href="/static/bbcode/editor.css" rel="Stylesheet" type="text/css" />
        <script src="/static/bbcode/editor.js" type="text/javascript"></script>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
        
        <script type="text/javascript">
//###################################################################
// Author: ricocheting.com
// Version: v3.0
// Date: 2014-09-05
// Description: displays the amount of time until the "dateFuture" entered below.

var CDown = function() {
	this.state=0;// if initialized
	this.counts=[];// array holding countdown date objects and id to print to {d:new Date(2013,11,18,18,54,36), id:"countbox1"}
	this.interval=null;// setInterval object
}

CDown.prototype = {
	init: function(){
		this.state=1;
		var self=this;
		this.interval=window.setInterval(function(){self.tick();}, 1000);
	},
	add: function(date,id){
		this.counts.push({d:date,id:id});
		this.tick();
		if(this.state==0) this.init();
	},
	expire: function(idxs){
		for(var x in idxs) {
			this.display(this.counts[idxs[x]], "Now!");
			this.counts.splice(idxs[x], 1);
		}
	},
	format: function(r){
		var out="";
		if(r.d != 0){out += r.d +" "+((r.d==1)?"jour":"jours")+" ";}
		if(r.h != 0){out += r.h +" "+((r.h==1)?"heure":"heures")+" ";}
		out += r.m +" "+((r.m==1)?"min":"mins")+" ";
		out += r.s +" "+((r.s==1)?"sec":"secs")+" ";

		return out.substr(0,out.length-2);
	},
	math: function(work){
		var	y=w=d=h=m=s=ms=0;

		ms=(""+((work%1000)+1000)).substr(1,3);
		work=Math.floor(work/1000);//kill the "milliseconds" so just secs

		y=Math.floor(work/31536000);//years (no leapyear support)
		w=Math.floor(work/604800);//weeks
		d=Math.floor(work/86400);//days
		work=work%86400;

		work=work%3600;

		work=work%60;


		return {y:y,w:w,d:d,h:Math.floor(Math.random() * 24),m:Math.floor(Math.random() * 60),s:Math.floor(Math.random() * 60),ms:ms};
	},
	tick: function(){
		var now=(new Date()).getTime(),
			expired=[],cnt=0,amount=0;

		if(this.counts)
		for(var idx=0,n=this.counts.length; idx<n; ++idx){
			cnt=this.counts[idx];
			amount=cnt.d.getTime()-now;//calc milliseconds between dates

			// if time is already past
			if(amount<0){
				expired.push(idx);
			}
			// date is still good
			else{
				this.display(cnt, this.format(this.math(amount)));
			}
		}

		// deal with any expired
		if(expired.length>0) this.expire(expired);

		// if no active counts, stop updating
		if(this.counts.length==0) window.clearTimeout(this.interval);
		
	},
	display: function(cnt,msg){
		document.getElementById(cnt.id).innerHTML=msg;
	}
};

window.onload=function(){
	var cdown = new CDown();

	cdown.add(new Date(2014,11,9,9,00,00), "countbox1");
};
</script>
        {% block script %}
        {% endblock %}
        {% if request.user.is_active %}
        <script type="text/javascript"> 
        $(document).ready(function(){
            $.ajaxSetup({ cache: false });
            setInterval(function() {
                $("#menu_droite_in").load('/notification/indicator/');
            }, 10000);
        });
        $(document).ready(function() {
            $('#chat').submit(function() { // catch the form's submit event
                $.ajax({ // create an AJAX call...
                    data: $(this).serialize(), // get the form data
                    type: $(this).attr('method'), // GET or POST
                    url: $(this).attr('action'), // the file to call
                    success: function(response) { // on success..
                        $('#menu_droite_in').load('/notification/indicator/'); // update the DIV
                        $('#chat_message').val('');
                    }
                });
                return false;
            });
        });
        </script>
        
        {% endif %}
	</head>
	
	<body>
	<div id="canvas_all">

		<div id="logo"></div>

		<div id="logo_gvg"></div>
		
		<div id="twitter_box">
		<a class="twitter-timeline" href="https://twitter.com/HS_Romandie" data-widget-id="539348362961883137">Tweets by @HS_Romandie</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
		</div>
		
		<div id="twitter_bird"></div>
	
			
		<div id="menu">
		</div>
		
		<div style="position: absolute; top: 333px; left: 71%; margin-left: -96px; background-image: url('http://hearthstone-romandie.ch/static/images/divers/pas_fiable.png'); background-repeat: no-repeat; width: 193px; height: 200px; z-index: 999;"></div>

		<div id="countbox1"style="position: absolute; top :310px; left: 59%; marign-left: -100px; font-size: 20px; 
	background: rgba(0,0,0, 0.8) url('/static/images/backgrounds/repeat/Diago_transp_50opacity.png');
	border: 3px double rgba(139,69,19, 1);
	-webkit-box-shadow: 0px 0px 10px 2px rgba(0,0,0,1);
	-moz-box-shadow: 0px 0px 10px 2px rgba(0,0,0,1);
	box-shadow: 0px 0px 10px 2px rgba(0,0,0,1); padding: 5px; height: 21px; width: 246px; text-align: center;"></div>
		<a href="/"><div id="menu_actualite_h"></div></a>
		<a href="/forum/"><div id="menu_forum_h"></div></a>
		<a href="/profil/recherche/"><div id="menu_membres_h"></div></a>
		<a href="/tournoi/"><div id="menu_tournoi_h"></div></a>
		
		<div id="liens">
			<div class="liens-titre"><h3>Liens utiles</h3></div>
			<ul class="liens_liste">
				<li><a href="http://www.twitch.tv/hearthstonefr" target="_blank">HSFR TV (TV Hearthstone FR 24/7 !)</a></li>
				<li><a href="http://hearthstone-decks.com" target="_blank">Hearthstone Decks</a></li>
				<li><a href="https://www.youtube.com/user/hearthstonefr" target="_blank">HSFR Strategy</a></li>
				<li><a href="http://www.hearthnews.fr" target="_blank">HearthNews</a></li>
	               <li><a href="http://achievementgen.com/hearthstone/" target="_blank">Générateur de cartes</a></li>
			</ul>
			<!-- <div class="liens-titre"><h3>Partenaires</h3></div> -->
			<ul class="liens_liste">
			<!-- <li><a href="http://www.jeuxvideo.ch/" target="_blank">Mix Image</a></li> -->
			</ul>
		</div>
		
		<div id="gvg_pack"></div>
		
		<div id="gvg_cards">
		
		<!-- Les cartes doivent avoir la dimmension 145x104 ! -->
		
		<div id="gvg_cards_bientot"></div>
	
		</div>
		
		{% if request.user.is_active %}			
		<div id="menu_droite">
	    <div id="menu_droite_in">	
        {% include 'notification/indicateur.html' %} 
		</div>
        <br />
        <form action="/notification/indicator/" method="POST" id="chat"><table style="width: 100%;"><td>
        {{request.user.profil_set.all.0.pseudo}}</td><td><input type="text" name="message" id="chat_message" style="width: 100%;" /></td>
        <td><center><input type="submit" value="Chat" /></center></td></table>
        {% csrf_token %}
        </form>
        <br />
        <div id="menu_droite_bas">
        </div>
		</div>
		{% endif %}
	
	    <div id="deco">
	    {% if request.user.is_active %}
	        <b> {{ request.user.username }} </b><a href="/profil/">&nbsp;Profil</a><span style="color: #8B4513;"> | </span><a href="/profil/deco/?url={{request.path}}">Déconnexion</a>
	        {% else %}
            <form METHOD="POST" ACTION="/profil/">
            <table>
            <tr><td><input type="hidden" value="{{request.path}}" name="url" />Identifiant</td><td><input size="14" name="username" /></td></tr><tr><td>Mot de passe</td><td><input size="14" name="password" type="password" /></td></tr><tr><td><a href="/profil/">Inscription</a></td><td>{% csrf_token %}<input type="submit" value="Login" /></td></tr>
            </table>
            </form>
	    {% endif %}
	    </div>
	       
		<div id="content">
            <noscript>
                <center><span style="color:red;">Ce site nécessite une activation du JavaScript pour une utilisation optimale.</span><br /></center>
            </noscript>
			{% block content %}
			{% endblock %}
		</div>
        <div class="clear"></div>
	
		<!-- FOOTER --><!--
		<div id="footer">
			<center>Ce footer est super cool</center>
		</div>-->
		<!-- FOOTER -->
	
	<p style="display: block; width: 100%; height: 40%;">
	<br /></p>
	<br />
	
	</div>
	</body>

</html>
